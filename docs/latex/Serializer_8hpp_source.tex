\doxysection{Serializer.\+hpp}
\hypertarget{Serializer_8hpp_source}{}\label{Serializer_8hpp_source}\index{include/core/Serializer.hpp@{include/core/Serializer.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ SERIALIZER\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ SERIALIZER\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}Component.hpp"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}Entity.hpp"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}GameManager.hpp"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}LDTKEntity.hpp"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}Vector2f.hpp"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ GET\_PROP(x)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\ \ \{\ \#x,\ \&x\ \}}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keywordtype}{bool}\ registerComponentType(\textcolor{keyword}{const}\ std::string\ \&typeName)\ \{}
\DoxyCodeLine{00015\ \ \ GameManager::componentRegistry[typeName]\ =\ [](\mbox{\hyperlink{classEntity}{Entity}}\ *entity)\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordflow}{return}\ entity-\/>add<T>(\textcolor{keyword}{false});}
\DoxyCodeLine{00017\ \ \ \};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00020\ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ REGISTER\_COMPONENT\_TYPE(Type)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\ \ namespace\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\ \ static\ bool\ Type\#\#\_registered\ =\ registerComponentType<Type>(\#Type);\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{extern}\ std::map<int,\ Entity\ *>\ entityIidMap;}
\DoxyCodeLine{00028\ \textcolor{keyword}{extern}\ std::map<int,\ std::vector<int>>\ entityNeedsEntityMap;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00031\ \textcolor{keywordtype}{void}\ deserializeBasicValue(json\ \&propJson,\ \mbox{\hyperlink{structPropertyData}{PropertyData}}\ data)\ \{}
\DoxyCodeLine{00032\ \ \ json\ value\ =\ propJson;}
\DoxyCodeLine{00033\ \ \ T\ *ptr\ =\ \textcolor{keyword}{static\_cast<}T\ *\textcolor{keyword}{>}(data.value);}
\DoxyCodeLine{00034\ \ \ *ptr\ =\ value;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ json\ serialize(\mbox{\hyperlink{classEntity}{Entity}}\ *entity);}
\DoxyCodeLine{00038\ json\ serializeList(std::vector<Entity\ *>\ entities);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \mbox{\hyperlink{classEntity}{Entity}}\ *deserialize(json\ jsonData,\ \textcolor{keywordtype}{bool}\ start\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00041\ std::vector<Entity\ *>\ deserializeList(json\ jsonData,\ \textcolor{keywordtype}{bool}\ active\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keywordtype}{void}\ serializeAndWrite(\mbox{\hyperlink{classEntity}{Entity}}\ *entity,\ std::string\ filepath\ =\ \textcolor{stringliteral}{"{}data.json"{}});}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ std::vector<Entity\ *>\ loadCollection(std::filesystem::path\ path);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
